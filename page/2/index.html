<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>zhangyong</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="zhangyong">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="zhangyong">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zhangyong">
  
    <link rel="alternative" href="/atom.xml" title="zhangyong" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head></html>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars0.githubusercontent.com/u/39975746?s=400&amp;u=5c82d9ef34c547270f3fbe1d343a296e3ebdce25&amp;v=4" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">zhangyong</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">zhangyong</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://avatars0.githubusercontent.com/u/39975746?s=400&amp;u=5c82d9ef34c547270f3fbe1d343a296e3ebdce25&amp;v=4" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">zhangyong</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-golang/golang包管理工具" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/golang包管理工具/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/golang包管理工具/">
        go包管理工具小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="go-dep"><a href="#go-dep" class="headerlink" title="go dep"></a>go dep</h1><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>执行以下命令安装<code>godep</code>工具。</p>
<pre><code>go get github.com/tools/godep</code></pre><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><p>安装好<code>godep</code>之后，在终端输入<code>godep</code>查看支持的所有命令。</p>
<pre><code>godep save     将依赖项输出并复制到Godeps.json文件中
godep go       使用保存的依赖项运行go工具
godep get      下载并安装具有指定依赖项的包
godep path     打印依赖的GOPATH路径
godep restore  在GOPATH中拉取依赖的版本
godep update   更新选定的包或go版本
godep diff     显示当前和以前保存的依赖项集之间的差异
godep version  查看版本信息</code></pre><p>使用<code>godep help [command]</code>可以看看具体命令的帮助信息。</p>
<p>使用godep<br>在项目目录下执行godep save命令，会在当前项目中创建Godeps和vender两个文件夹。</p>
<p>其中Godeps文件夹下有一个Godeps.json的文件，里面记录了项目所依赖的包信息。 vender文件夹下是项目依赖的包的源代码文件。</p>
<h3 id="go-dep开发流程"><a href="#go-dep开发流程" class="headerlink" title="go dep开发流程"></a>go dep开发流程</h3><p>保证程序能够正常编译</p>
<p>执行<code>godep save</code>保存当前项目的所有第三方依赖的版本信息和代码</p>
<p>提交<code>Godeps</code>目录和<code>vender</code>目录到代码库。</p>
<p>如果要更新依赖的版本，可以直接修改<code>Godeps.json</code>文件中的对应项</p>
<h3 id="vender机制"><a href="#vender机制" class="headerlink" title="vender机制"></a>vender机制</h3><p>Go1.5版本之后开始支持，能够控制Go语言程序编译时依赖包搜索路径的优先级。</p>
<p>例如查找项目的某个依赖包，首先会在项目根目录下的<code>vender</code>文件夹中查找，如果没有找到就会去<code>$GOAPTH/src</code>目录下查找。</p>
<p>##go module<br>go module是Go1.11版本之后官方推出的版本管理工具，并且从Go1.13版本开始，go module将是Go语言默认的依赖管理工具。</p>
<h3 id="go-mod命令"><a href="#go-mod命令" class="headerlink" title="go mod命令"></a>go mod命令</h3><p>常用的go mod命令如下：</p>
<pre><code>go mod download    下载依赖的module到本地cache（默认为$GOPATH/pkg/mod目录）
go mod edit        编辑go.mod文件
go mod graph       打印模块依赖图
go mod init        初始化当前文件夹, 创建go.mod文件
go mod tidy        增加缺少的module，删除无用的module
go mod vendor      将依赖复制到vendor下
go mod verify      校验依赖
go mod why         解释为什么需要依赖

module用来定义包名
require用来定义依赖包及版本
indirect表示间接引用</code></pre><h3 id="GOPROXY"><a href="#GOPROXY" class="headerlink" title="GOPROXY"></a>GOPROXY</h3><p>GOPROXY 的默认值是：</p>
<pre><code>https://proxy.golang.org,direct</code></pre><p>这有一个很严重的问题，就是 <code>proxy.golang.org</code> 在国内是无法访问的，<br>因此这会直接卡住你的第一步，所以你必须在开启 Go modules 的时<br>，同时设置国内的 Go 模块代理，执行如下命令：</p>
<pre><code>$ go env -w GOPROXY=https://goproxy.cn,direct</code></pre><h3 id="命令行开启-Go-Modules"><a href="#命令行开启-Go-Modules" class="headerlink" title="命令行开启 Go Modules"></a>命令行开启 Go Modules</h3><p>目前 Go modules 并不是默认开启，因此Go语言提供了 GO111MODULE 这个环境变量来作为 Go modules 的开关，其允许设置以下参数：</p>
<ul>
<li>auto：只要项目包含了 go.mod 文件的话启用 Go modules，目前在Go1.11至 Go1.14 中仍然是默认值。</li>
<li>on：启用 Go modules，推荐设置，将会是未来版本中的默认值。</li>
<li>off：禁用 Go modules，不推荐设置。</li>
</ul>
<p>如果你不确定你当前的值是什么，可以执行go env命令，查看结果：</p>
<pre><code>$ go env
GO111MODULE=&quot;off&quot;</code></pre><p>如果需要对 GO111MODULE 的值进行变更，推荐通过go env命令进行设置：</p>
<pre><code>$ go env -w GO111MODULE=on</code></pre><h3 id="goland中启用go-module"><a href="#goland中启用go-module" class="headerlink" title="goland中启用go module"></a>goland中启用go module</h3><p><img src="../golang%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/%E5%BC%80%E5%90%AFgomodule.png" alt></p>
<p>代理可以设置为：<code>https://goproxy.cn</code></p>
<h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><pre><code>go mod init</code></pre><h3 id="go-mod-文件"><a href="#go-mod-文件" class="headerlink" title="go.mod 文件"></a>go.mod 文件</h3><p>在初始化项目时，会生成一个 go.mod 文件，是启用了 Go modules 项目所必须的最重要的标识.</p>
<p>示例：</p>
<pre><code>module github.com/example
go 1.13

require (
    github.com/jinzhu/gorm v1.9.12 // indirect
)
exclude github.com/jinzhu/gorm v1.9.11
replace github.com/go-kit/kit v0.9.0 =&gt; github.com/go-kit/kit v0.8.0</code></pre><ul>
<li>module：用于定义当前项目的模块路径。</li>
<li>go：用于标识当前模块的 Go 语言版本，值为初始化模块时的版本，<code>升级golang版本时，要注意是否需要更改此处</code></li>
<li>require：用于设置一个特定的模块版本。</li>
<li>exclude：用于从使用中排除一个特定的模块版本。</li>
<li>replace：用于将一个模块版本替换为另外一个模块版本  </li>
</ul>
<h3 id="go-sum-文件"><a href="#go-sum-文件" class="headerlink" title="go.sum 文件"></a>go.sum 文件</h3><p>go.sum 文件详细罗列了当前项目直接或间接依赖的所有模块版本，并写明了那些模块版本的 SHA-256 哈希值以备 Go 在今后的操作中保证项目所依赖的那些模块版本不会被篡改。</p>
<pre><code>cloud.google.com/go v0.26.0/go.mod h1:aQUYkXzVsufM+DwF1aE+0xfcU+56JwCaLick0ClmMTw=
github.com/BurntSushi/toml v0.3.1 h1:WXkYYl6Yr3qBf1K79EBnL4mak0OimBfB0XUf9Vl28OQ=
github.com/BurntSushi/toml v0.3.1/go.mod h1:xHWCNGjB5oqiDr8zfno3MHue2Ht5sIBksp03qcyfWMU=
....</code></pre><p>h1 hash 是 Go modules 将目标模块版本的 zip 文件开包后，针对所有包内文件依次进行 hash，然后再把它们的 hash 结果按照固定格式和算法组成总的 hash 值。</p>
<p>而 h1 hash 和 go.mod hash 两者，要不就是同时存在，要不就是只存在 go.mod hash。那什么情况下会不存在 h1 hash 呢，就是当 Go 认为肯定用不到某个模块版本的时候就会省略它的 h1 hash，就会出现不存在 h1 hash，只存在 go.mod hash 的情况。</p>
<h2 id="替代包"><a href="#替代包" class="headerlink" title="替代包"></a>替代包</h2><p>在管理过程中，导入的包为 <code>0.9.0</code> 版本，实际需要<code>0.8.0</code>版本，需要将导入的<code>0.9.0</code>版本<br>用<code>replace</code>替代为 <code>0.8.0</code> 版本</p>
<pre><code>go 1.13

require (
    github.com/jinzhu/gorm v1.9.12 // indirect
)
replace github.com/go-kit/kit v0.9.0 =&gt; github.com/go-kit/kit v0.8.0</code></pre><p>也可以用命令行模式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod edit -replace=old[@v]=new[@v]</span><br></pre></td></tr></table></figure>

<h2 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h2><p><a href="https://mp.weixin.qq.com/s/nd8ic1Qk812ZqmHKSFITUQ" target="_blank" rel="noopener">学习 Go Modules 这一篇就够：终极入门</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/golang面试题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/golang面试题/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/golang面试题/">
        go 面试题小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="使用Go编程有什么好处？"><a href="#使用Go编程有什么好处？" class="headerlink" title="使用Go编程有什么好处？"></a>使用Go编程有什么好处？</h2><p>1 golang虽然不像jvm那样，一次构建，到处运行。但是golang支持跨平台编译，完全能够适应多平台。</p>
<p>2 内嵌C支持。Go里面也可以直接包含c代码，利用现有的丰富的C库。</p>
<p>3 gofmt，它根据 Go 的建议风格对代码进行格式化。</p>
<p>4 <code>goroutine</code>的轻量级线程，并通过<code>channel</code>进行通信。</p>
<p>5 golang 的调度机制</p>
<h2 id="Go支持类型继承吗？"><a href="#Go支持类型继承吗？" class="headerlink" title="Go支持类型继承吗？"></a>Go支持类型继承吗？</h2><p><a href="https://cloud.tencent.com/developer/news/411806" target="_blank" rel="noopener">Go语言中没有类继承，要用多态怎么办？</a></p>
<pre><code>type shape interface{

    hasArea（name string）bool

}

type square struct {

    length int

}

func （sq square）hasArea(type string) bool {

    if type == &quot;line&quot;

        return false

    else

        return true

}

使用的时候可以这样:

sq := square

fmt.Pringln（&quot;Has area?&quot;, sq.hasArea（））

或者这样

var sq shape

sq = square

fmt.Pringln（&quot;Has area?&quot;, sq.hasArea（））

从上面的例子可以看出，任何能够匹配以上接口中函数定义的结构对象， 
都可以使用这个接口类型。

这样做，就在go语言实现多态了。</code></pre><p>Go支持运营商超载吗？</p>
<h2 id="Go支持方法重载吗？"><a href="#Go支持方法重载吗？" class="headerlink" title="Go支持方法重载吗？"></a>Go支持方法重载吗？</h2><p>不支持</p>
<h2 id="Go支持指针算术吗？"><a href="#Go支持指针算术吗？" class="headerlink" title="Go支持指针算术吗？"></a>Go支持指针算术吗？</h2><p>golang虽说指针变量不能直接参与指针运算, 但是却提供了unsafe包, 能够实现同样的功能。</p>
<p><a href="https://www.jianshu.com/p/c5dd12522cc6" target="_blank" rel="noopener">Golang是否真的没有指针运算</a></p>
<h2 id="Go支持通用编程吗？"><a href="#Go支持通用编程吗？" class="headerlink" title="Go支持通用编程吗？"></a>Go支持通用编程吗？</h2><p>Go编程语言不支持通用/泛型编程</p>
<h2 id="Go是一个区分大小写的语言吗？"><a href="#Go是一个区分大小写的语言吗？" class="headerlink" title="Go是一个区分大小写的语言吗？"></a>Go是一个区分大小写的语言吗？</h2><p>区分：例如在方法名上，首字母大写表示方法为public,小写为私有方法</p>
<h2 id="Go中变量的静态类型声明是什么？Go中变量的动态类型声明是什么？"><a href="#Go中变量的静态类型声明是什么？Go中变量的动态类型声明是什么？" class="headerlink" title="Go中变量的静态类型声明是什么？Go中变量的动态类型声明是什么？"></a>Go中变量的静态类型声明是什么？Go中变量的动态类型声明是什么？</h2><p>静态类型(static type)是变量声明的时候的声明类型，<br>在变量声明、new方法创建对象时或者结构体(struct)的元素的类型定义，参数类型等。</p>
<p>接口(interface)类型的变量还有一个动态类型，它是运行时赋值给这个变量的具体的值的类型(当然值为nil的时候没有动态类型)。一个变量的动态类型在运行时可能改变，<br>这主要依赖它的赋值。</p>
<pre><code>var x interface{}  // x 为零值 nil,静态类型为 interface{}
var v *T           // v 为零值 nil, 静态类型为 *T
x = 42             // x 的值为 42,动态类型为int, 静态类型为interface{}
x = v              // x 的值为 (*T)(nil)， 动态类型为 *T, 静态类型为 *T</code></pre><h2 id="你能在Go中的单个声明中声明多种类型的变量吗？"><a href="#你能在Go中的单个声明中声明多种类型的变量吗？" class="headerlink" title="你能在Go中的单个声明中声明多种类型的变量吗？"></a>你能在Go中的单个声明中声明多种类型的变量吗？</h2><p>能</p>
<pre><code>var m, n int
a, b := &quot;a&quot;, &quot;b&quot;;

var(
   no  int
   name string
)</code></pre><h2 id="如何在Go中打印变量的类型？"><a href="#如何在Go中打印变量的类型？" class="headerlink" title="如何在Go中打印变量的类型？"></a>如何在Go中打印变量的类型？</h2><pre><code>第一种方式，反射：
fmt.Println(reflect.TypeOf(var)) 

第二种方式， %T
var a, b, c = 3, 4, &quot;foo&quot;    
fmt.Printf(&quot;a is of type %T\n&quot;, a)</code></pre><p>什么是指针？</p>
<h2 id="break语句的目的是什么？"><a href="#break语句的目的是什么？" class="headerlink" title="break语句的目的是什么？"></a>break语句的目的是什么？</h2><pre><code>break：跳出for循环;break在switch（开关语句）中在执行一条case后跳出语句的作用
continue:跳过当前循环执行下一次循环语句</code></pre><p><a href="https://blog.csdn.net/mofiu/article/details/77318376" target="_blank" rel="noopener">golang跳转语句goto,break,continue的使用及区别</a></p>
<p>继续声明的目的是什么？</p>
<h2 id="goto语句的目的是什么？"><a href="#goto语句的目的是什么？" class="headerlink" title="goto语句的目的是什么？"></a>goto语句的目的是什么？</h2><pre><code>goto可以跳出多层嵌套循环，
for，while，dowhile本质是用goto语句实现的，goto语句比较底层</code></pre><p>除非跳出多个循环嵌套和远程注入技术，否则尽量少用goto</p>
<p>goto会降低程序的可读性，让代码难以调试</p>
<p> 利用递归也可以实现循环结构和do while类似</p>
<p><a href="https://www.cnblogs.com/luoxuw/p/11257788.html" target="_blank" rel="noopener">goto语句的本质</a></p>
<h2 id="解释’for’循环的语法。"><a href="#解释’for’循环的语法。" class="headerlink" title="解释’for’循环的语法。"></a>解释’for’循环的语法。</h2><p><a href="https://blog.csdn.net/guofeng93/article/details/90804430" target="_blank" rel="noopener">https://blog.csdn.net/guofeng93/article/details/90804430</a></p>
<h2 id="解释在Go中创建函数的语法。"><a href="#解释在Go中创建函数的语法。" class="headerlink" title="解释在Go中创建函数的语法。"></a>解释在Go中创建函数的语法。</h2><pre><code>func function_name( [parameter list] ) [return_types] {
   函数体
}</code></pre><h2 id="你能从函数中返回多个值吗？"><a href="#你能从函数中返回多个值吗？" class="headerlink" title="你能从函数中返回多个值吗？"></a>你能从函数中返回多个值吗？</h2><p>能</p>
<pre><code>func (file *File) Read(b []byte) (n int, err Error) </code></pre><p>您可以将参数传递给方法的方式有多少？</p>
<p>将参数传递给函数的默认方式是什么？</p>
<h2 id="Go中的函数作为值是什么意思？"><a href="#Go中的函数作为值是什么意思？" class="headerlink" title="Go中的函数作为值是什么意思？"></a>Go中的函数作为值是什么意思？</h2><p>在Go中函数也是一种变量，我们可以通过type来定义它，<br>它的类型就是所有拥有相同的参数，相同的返回值的一种类型</p>
<pre><code>type typeName func(input1 inputType1 , input2 inputType2 [, ...]) (result1 resultType1 [, ...])</code></pre><h2 id="什么是功能关闭？"><a href="#什么是功能关闭？" class="headerlink" title="什么是功能关闭？"></a>什么是功能关闭？</h2><p>定义的或内置的可调用函数</p>
<p>Go中的方法是什么？</p>
<p>Go中局部变量的默认值是多少？</p>
<p>Go中全局变量的默认值是多少？</p>
<h2 id="Go中指针变量的默认值是多少？"><a href="#Go中指针变量的默认值是多少？" class="headerlink" title="Go中指针变量的默认值是多少？"></a>Go中指针变量的默认值是多少？</h2><p>在go语言中，任何类型在声明后没有赋值的情况下，都对应一个零值。</p>
<pre><code>整形如int8、byte、int16、uint、uintprt等，默认值为0。
浮点类型如float32、float64，默认值为0。
布尔类型bool的默认值为false。
复数类型如complex64、complex128，默认值为0+0i。
字符串string的默认值为”“。
错误类型error的默认值为nil。
对于一些复合类型，如指针、切片、字典、通道、接口，默认值为nil。
而数组的默认值要根据其数据类型来确定。
例如：var a [4]int，其默认值为[0 0 0 0]。</code></pre><h2 id="解释Printf（）函数的用途。"><a href="#解释Printf（）函数的用途。" class="headerlink" title="解释Printf（）函数的用途。"></a>解释Printf（）函数的用途。</h2><p>格式化输出。</p>
<p>什么是左值和左值？</p>
<p>实际和形式参数之间有什么区别？</p>
<p>变量声明和变量定义有什么区别？</p>
<p>解释模块化编程。</p>
<p>什么是令牌？</p>
<p>哪个关键字用于执行无条件分支？</p>
<p>什么是阵列？</p>
<p>Go中的零指针是什么？</p>
<p>指针上的指针是什么？</p>
<p>Go的结构是什么？</p>
<p>如何在Go中定义一个结构？</p>
<p>Go中的切片是什么？</p>
<p>如何在Go中定义切片？</p>
<p>如何获取切片中存在的元素数？</p>
<p>Go中slice的len（）和cap（）函数有什么区别？</p>
<p>长度 、容量</p>
<p>如何获得切片的子切片？</p>
<p>Go的范围是什么？</p>
<p>Go中的map是什么？</p>
<p>如何在Go中创建map？</p>
<p>如何从Go中删除map中的条目？</p>
<p>什么是Go中的类型转换？</p>
<p>Go中的接口是什么？</p>
<p>垃圾回收</p>
<p>逃逸分析</p>
<p>除了 mutex 以外还有那些方式安全读写共享变量？</p>
<h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><h3 id="1-无缓冲-chan-的发送和接收是否同步？"><a href="#1-无缓冲-chan-的发送和接收是否同步？" class="headerlink" title="1 无缓冲 chan 的发送和接收是否同步？"></a>1 无缓冲 chan 的发送和接收是否同步？</h3><p>ch := make(chan int) 无缓冲的channel由于没有缓冲发送和接收需要同步.</p>
<p>ch := make(chan int, 2) 有缓冲channel不要求发送和接收操作同步</p>
<p>仅当信道的缓冲区填满后，向其发送数据时才会阻塞（阻塞写）。<br>当缓冲区为空时，接受方会阻塞（阻塞读）</p>
<h3 id="2-channel-是通过注册-goroutine-id-实现？"><a href="#2-channel-是通过注册-goroutine-id-实现？" class="headerlink" title="2 channel 是通过注册 goroutine id 实现？"></a>2 channel 是通过注册 goroutine id 实现？</h3><p>是</p>
<h3 id="3-如何用channel实现一个令牌桶"><a href="#3-如何用channel实现一个令牌桶" class="headerlink" title="3 如何用channel实现一个令牌桶"></a>3 如何用channel实现一个令牌桶</h3><p><a href="https://www.jianshu.com/p/a6129c70f7d4" target="_blank" rel="noopener">go 令牌桶简易实现</a></p>
<p>令牌桶算法的基本过程如下：</p>
<ul>
<li>假如用户配置的平均发送速率为r，则每隔1/r秒一个令牌被加入到桶中；</li>
<li>假设桶最多可以存发b个令牌。如果令牌到达时令牌桶已经满了，那么这个令牌会被丢弃；</li>
<li>当一个n个字节的数据包到达时，就从令牌桶中删除n个令牌，并且数据包被发送到网络；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    &quot;fmt&quot;</span><br><span class="line">    &quot;sync&quot;</span><br><span class="line">    &quot;time&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Bucket struct &#123;</span><br><span class="line">    cap   int //容量</span><br><span class="line">    ch    chan bool   </span><br><span class="line">    timer *time.Ticker //定时填充token</span><br><span class="line">    mu    sync.Mutex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func NewBucket(cap int, interval time.Duration) *Bucket &#123;</span><br><span class="line">    bucket := &amp;Bucket&#123;</span><br><span class="line">        cap:   cap,</span><br><span class="line">        ch:    make(chan bool, cap),</span><br><span class="line">        timer: time.NewTicker(interval),</span><br><span class="line">    &#125;</span><br><span class="line">    go bucket.startTicker()</span><br><span class="line">    return bucket</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (bucket *Bucket) startTicker() &#123;</span><br><span class="line">    for i := 0; i &lt; bucket.cap; i++ &#123;</span><br><span class="line">        bucket.ch &lt;- true</span><br><span class="line">    &#125;</span><br><span class="line">    for &#123;</span><br><span class="line">        select &#123;</span><br><span class="line">        case &lt;-bucket.timer.C:</span><br><span class="line">            for i := len(bucket.ch); i &lt; bucket.cap; i++ &#123;</span><br><span class="line">                bucket.Add()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (bucket *Bucket) Add() &#123;</span><br><span class="line">    bucket.mu.Lock()</span><br><span class="line">    defer bucket.mu.Unlock()</span><br><span class="line">    if len(bucket.ch) &lt; bucket.cap &#123;</span><br><span class="line">        bucket.ch &lt;- true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (bucket *Bucket) Get() bool &#123;</span><br><span class="line">    select &#123;</span><br><span class="line">    case &lt;-bucket.ch:</span><br><span class="line">        return true</span><br><span class="line">    default:</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line"></span><br><span class="line">    bucket := NewBucket(5, time.Second)</span><br><span class="line">    for i := 0; i &lt; 1000; i++ &#123;</span><br><span class="line">        time.Sleep(time.Millisecond * 100)</span><br><span class="line">        go DoFunc(bucket, i)</span><br><span class="line">    &#125;</span><br><span class="line">    for &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func DoFunc(bucket *Bucket, index int) &#123;</span><br><span class="line">    if bucket.Get() &#123;</span><br><span class="line">        fmt.Printf(&quot;######### success : %d \n&quot;, index)</span><br><span class="line">        bucket.Add() // 每次请求成功后执行Add是否合理？？？每一时刻最多可有cap个token可用</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        fmt.Printf(&quot;######### failed : %d \n&quot;, index)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="golang-采用什么并发模型？体现在哪里？"><a href="#golang-采用什么并发模型？体现在哪里？" class="headerlink" title="golang 采用什么并发模型？体现在哪里？"></a>golang 采用什么并发模型？体现在哪里？</h2><p><a href="https://www.jianshu.com/p/6032f2db6be5" target="_blank" rel="noopener">Golang并发模型</a></p>
<p>说说 golang 中常用的并发模式？</p>
<p>JSON 标准库对 nil slice 和 空 slice 的处理是一致的吗？</p>
<p>Go程序能链接C/C++程序吗</p>
<p>为什么Go没有泛型</p>
<h2 id="为什么Go没有异常"><a href="#为什么Go没有异常" class="headerlink" title="为什么Go没有异常"></a>为什么Go没有异常</h2><p>因为go开发者认为，所有异常皆可打印。</p>
<p>为什么用CSP思想构建并发如何知道变量分配到堆还是栈</p>
<p>为什么没有goroutine ID</p>
<p>restful熟悉吗？都有哪些请求方法，分别代表什么意思？</p>
<p>手写循环队列进程虚拟空间分布，全局变量放哪里？</p>
<p>c++ 和 go对比</p>
<p>怎么理解云计算</p>
<p>go使用踩过什么坑</p>
<p>go内存模型，什么是小对象，go get，go tool，go test，go vetgo什么情况下会发生内存泄漏？</p>
<h2 id="go为什么高并发好？"><a href="#go为什么高并发好？" class="headerlink" title="go为什么高并发好？"></a>go为什么高并发好？</h2><p>Golang 从语言级别支持并发，通过轻量级协程 Goroutine 来实现程序并发运行。</p>
<p>** Goroutine 非常轻量 **，主要体现在以下两个方面：</p>
<ul>
<li><p>上下文切换代价小： Goroutine 上下文切换只涉及到三个寄存器（PC / SP / DX）的值修改；<br>而对比线程的上下文切换则需要涉及模式切换（从用户态切换到内核态）、<br>以及 16 个寄存器、PC、SP…等寄存器的刷新；</p>
</li>
<li><p>内存占用少 ：线程栈空间通常是 2M，Goroutine 栈空间最小 2K；</p>
</li>
</ul>
<p>Golang 程序中可以轻松支持10w 级别的 Goroutine 运行，<br>而线程数量达到 1k 时，内存占用就已经达到 2G。</p>
<h2 id="Go语言-CPU-性能、内存分析调试方法大汇总"><a href="#Go语言-CPU-性能、内存分析调试方法大汇总" class="headerlink" title="Go语言 CPU 性能、内存分析调试方法大汇总"></a><a href="https://mp.weixin.qq.com/s/-HojlxCZZIcWWwprQaVkzw" target="_blank" rel="noopener">Go语言 CPU 性能、内存分析调试方法大汇总</a></h2><p>pprof</p>
<p>go的分布式</p>
<p>谈谈go的未来</p>
<p>gogc</p>
<h2 id="go的调度"><a href="#go的调度" class="headerlink" title="go的调度"></a>go的调度</h2><p> <a href="https://www.zhihu.com/question/21409296/answer/1040884859" target="_blank" rel="noopener">go调度器</a></p>
<h2 id="go-struct能不能比较-空struct-用处"><a href="#go-struct能不能比较-空struct-用处" class="headerlink" title="go struct能不能比较  空struct{}用处"></a>go struct能不能比较  空struct{}用处</h2><pre><code>因为是强类型语言，所以不同类型的结构不能作比较，
但是同一类型的实例值是可以比较的，实例不可以比较，因为是指针类型

map[inter]struct{}</code></pre><p>go defer（for defer）     </p>
<p>select可以用于什么 </p>
<pre><code>常用于gorotine的完美退出
golang 的 select 就是监听 IO 操作，当 IO 操作发生时，触发相应的动作
每个case语句里必须是一个IO操作，确切的说，应该是一个面向channel的IO操作    </code></pre><p>context包的用途     </p>
<p>client如何实现长连接     </p>
<pre><code>server是设置超时时间，for循环遍历的</code></pre><p>主协程如何等其余协程完再操作     </p>
<p>slice，len，cap，共享，扩容    </p>
<p>map如何顺序读取    </p>
<pre><code>map不能顺序读取，是因为他是无序的，想要有序读取，
首先的解决的问题就是，把ｋｅｙ变为有序，
所以可以把key放入切片，对切片进行排序，遍历切片，通过key取值。</code></pre><p>实现set     </p>
<pre><code>type inter interface{}
type Set struct {
    m map[inter]bool
    sync.RWMutex
}

func New() *Set {
    return &amp;Set{
    m: map[inter]bool{},
    }
}
func (s *Set) Add(item inter) {
    s.Lock()
    defer s.Unlock()
    s.m[item] = true
}</code></pre><p>实现消息队列（多生产者，多消费者）     </p>
<pre><code>使用切片加锁可以实现</code></pre><p>大文件排序     </p>
<pre><code>归并排序，分而治之,拆分为小文件，在排序</code></pre><p>基本排序，哪些是稳定的     </p>
<p>读写锁</p>
<h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1><h2 id="1-http-get跟head"><a href="#1-http-get跟head" class="headerlink" title="1 http get跟head"></a>1 http get跟head</h2><pre><code>HEAD和GET本质是一样的，区别在于HEAD不含有呈现数据，
而仅仅是HTTP头信息。有的人可能觉得这个方法没什么用，
其实不是这样的。想象一个业务情景：欲判断某个资源是否存在，
我们通常使用GET，但这里用HEAD则意义更加明确。</code></pre><h2 id="2-http-401-403"><a href="#2-http-401-403" class="headerlink" title="2 http 401,403"></a>2 http 401,403</h2><pre><code>400 bad request，请求报文存在语法错误
401 unauthorized，表示发送的请求需要有通过 HTTP 认证的认证信息
403 forbidden，表示对请求资源的访问被服务器拒绝
404 not found，表示在服务器上没有找到请求的资源  </code></pre><h2 id="3-http-keep-alive"><a href="#3-http-keep-alive" class="headerlink" title="3 http keep-alive"></a>3 http keep-alive</h2><pre><code>client发出的HTTP请求头需要增加Connection:keep-alive字段
Web-Server端要能识别Connection:keep-alive字段，
并且在http的response里指定Connection:keep-alive字段，
告诉client，我能提供keep-alive服务，
并且&quot;应允&quot;client我暂时不会关闭socket连接</code></pre><h2 id="4-http能不能一次连接多次请求，不等后端返回"><a href="#4-http能不能一次连接多次请求，不等后端返回" class="headerlink" title="4 http能不能一次连接多次请求，不等后端返回"></a>4 http能不能一次连接多次请求，不等后端返回</h2><pre><code>http本质上市使用socket连接，因此发送请求，接写入tcp缓冲，
是可以多次进行的，这也是http是无状态的原因   </code></pre><h2 id="5-tcp与udp区别，udp优点，适用场景"><a href="#5-tcp与udp区别，udp优点，适用场景" class="headerlink" title="5 tcp与udp区别，udp优点，适用场景"></a>5 tcp与udp区别，udp优点，适用场景</h2><pre><code>tcp传输的是数据流，而udp是数据包，tcp会进过三次握手，udp不需要</code></pre><h2 id="6-time-wait的作用-服务产生大量的time-wait如何解决"><a href="#6-time-wait的作用-服务产生大量的time-wait如何解决" class="headerlink" title="6 time-wait的作用     服务产生大量的time_wait如何解决"></a>6 time-wait的作用     服务产生大量的time_wait如何解决</h2><p><a href="https://www.jianshu.com/p/41f7e468f312" target="_blank" rel="noopener">https://www.jianshu.com/p/41f7e468f312</a></p>
<pre><code>如果服务器最后发送的ACK因为某种原因丢失了，那么客户一定会重新发送FIN，
这样因为有TIME_WAIT的存在，服务器会重新发送ACK给客户，
如果没有TIME_WAIT，那么无论客户有没有收到ACK，服务器都已经关掉连接了，
此时客户重新发送FIN，服务器将不会发送ACK，而是RST，从而使客户端报错

如果没有TIME_WAIT，我们可以在最后一个ACK还未到达客户的时候，
就建立一个新的连接。那么此时，如果客户收到了这个ACK的话，就乱套了，
必须保证这个ACK完全死掉之后，才能建立新的连接。


在应用中通过设置合理的连接池参数可以避免TIME_WAIT状态过多的问题
比如 http  redis  grpc  mysql...</code></pre><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="1-索引"><a href="#1-索引" class="headerlink" title="1 索引"></a>1 索引</h2><h2 id="2-锁"><a href="#2-锁" class="headerlink" title="2 锁"></a>2 锁</h2><h2 id="3-事务"><a href="#3-事务" class="headerlink" title="3 事务"></a>3 事务</h2><p>幻读，一致性，CAP</p>
<h2 id="4-持久化"><a href="#4-持久化" class="headerlink" title="4 持久化"></a>4 持久化</h2><h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><h2 id="1-持久化"><a href="#1-持久化" class="headerlink" title="1 持久化"></a>1 持久化</h2><h2 id="2-分布式锁"><a href="#2-分布式锁" class="headerlink" title="2 分布式锁"></a>2 分布式锁</h2><h2 id="3-sorted-set"><a href="#3-sorted-set" class="headerlink" title="3 sorted set"></a>3 sorted set</h2><h1 id="mq"><a href="#mq" class="headerlink" title="mq"></a>mq</h1><h2 id="1-重复消费"><a href="#1-重复消费" class="headerlink" title="1 重复消费"></a>1 重复消费</h2><h2 id="2-保证不丢失消息"><a href="#2-保证不丢失消息" class="headerlink" title="2 保证不丢失消息"></a>2 保证不丢失消息</h2><p>孤儿进程，僵尸进程     </p>
<p>死锁条件，如何避免     </p>
<p>linux命令，查看端口占用，cpu负载，内存占用，如何发送信号给一个进程     </p>
<p>git文件版本，使用顺序，merge跟rebase</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/go跨平台编译" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/go跨平台编译/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/go跨平台编译/">
        go跨平台编译小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#1、跨平台编译<br><a href="https://studygolang.com/articles/20471" target="_blank" rel="noopener">https://studygolang.com/articles/20471</a></p>
<h2 id="windows平台下编译linux可执行文件："><a href="#windows平台下编译linux可执行文件：" class="headerlink" title="windows平台下编译linux可执行文件："></a>windows平台下编译linux可执行文件：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET CGO_ENABLED=0 //禁用CGO</span><br><span class="line">SET GOOS=linux //目标平台是linux</span><br><span class="line">SET GOARCH=amd64 // 目标处理器架构是amd64</span><br></pre></td></tr></table></figure>

<p>再执行 ‘go bulid’ 命令，就可以得到在linux平台运行的可执行文件了</p>
<h2 id="Mac-下编译-Linux-和windows平台64位可执行文件"><a href="#Mac-下编译-Linux-和windows平台64位可执行文件" class="headerlink" title="Mac 下编译 Linux 和windows平台64位可执行文件"></a>Mac 下编译 Linux 和windows平台64位可执行文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 </span><br><span class="line">GOOS=darwin </span><br><span class="line">GOARCH=amd64</span><br><span class="line">go bulid</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 </span><br><span class="line">GOOS=windows </span><br><span class="line">GOARCH=amd64</span><br><span class="line">go bulid</span><br></pre></td></tr></table></figure>

<h2 id="windows下编译Mac平台64位可执行文件"><a href="#windows下编译Mac平台64位可执行文件" class="headerlink" title="windows下编译Mac平台64位可执行文件"></a>windows下编译Mac平台64位可执行文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 </span><br><span class="line">GOOS=darwin </span><br><span class="line">GOARCH=amd64</span><br><span class="line">go bulid</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/go数据类型" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/go数据类型/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/go数据类型/">
        go数据类型小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.cnblogs.com/itbsl/p/9854681.html" target="_blank" rel="noopener">https://www.cnblogs.com/itbsl/p/9854681.html</a></p>
<h1 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h1><h2 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h2><p>无符号整型：<code>uint8</code>、<code>uint16</code>、<code>uint32</code>、<code>uint64</code></p>
<p>带符号整型：<code>int8</code> <code>int16</code> <code>int32</code> <code>int64</code></p>
<p><code>uint</code>和<code>int</code>具体是32位还是64位看操作系统</p>
<h2 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h2><p>float32和float64 </p>
<p>Go语言中浮点数默认是float64</p>
<h2 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h2><p>complex128和complex64</p>
<h2 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h2><p>boolean</p>
<p>##字符串<br>string</p>
<h2 id="byte和rune类型"><a href="#byte和rune类型" class="headerlink" title="byte和rune类型"></a>byte和rune类型</h2><p>go语言中字符串都是UTF-8编码，UTF-8编码中一个常用汉字一般占3个字符</p>
<p>由于rune可表示的范围更大，所以能处理一切字符，当然也包括中文字符。在平时计算中文字符，可用rune。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;</span><br><span class="line">    var chinese = &quot;我是中国人， I am Chinese&quot;</span><br><span class="line">    fmt.Println(&quot;chinese length&quot;, len(chinese))</span><br><span class="line">    fmt.Println(&quot;chinese word length&quot;, len([]rune(chinese)))</span><br><span class="line">    fmt.Println(&quot;chinese word length&quot;, utf8.RuneCountInString(chinese))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//输出，注意在golang中一个汉字占3个byte</span><br><span class="line">chinese length 31</span><br><span class="line">chinese word length 19</span><br><span class="line">chinese word length 19</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/protocol-buffer" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/protocol-buffer/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/protocol-buffer/">
        go protocol-buffer小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://blog.csdn.net/mzpmzk/article/details/80824839" target="_blank" rel="noopener">https://blog.csdn.net/mzpmzk/article/details/80824839</a></p>
<p>Source: <a href="https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/Protocol-buffers-decode.md" target="_blank" rel="noopener">https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/Protocol-buffers-decode.md</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/初探 Go 的编译命令执行过程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/初探 Go 的编译命令执行过程/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/初探 Go 的编译命令执行过程/">
        go编译命令执行过程小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.jianshu.com/p/35a4ec1b3067" target="_blank" rel="noopener">https://www.jianshu.com/p/35a4ec1b3067</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-golang/利用goland搭建gin框架" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/golang/利用goland搭建gin框架/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/golang/利用goland搭建gin框架/">
        gin框架搭建小结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##1 go gin</p>
<p>##2 安装</p>
<p><a href="https://gin-gonic.com/zh-cn/docs/" target="_blank" rel="noopener">gin-gonic</a></p>
<p><a href="https://github.com/gin-gonic/gin" target="_blank" rel="noopener">gin</a></p>
<pre><code>go get -u github.com/gin-gonic/gin</code></pre><p>##3 导入<br>    package main</p>
<pre><code>import &quot;github.com/gin-gonic/gin&quot;

func main() {
    r := gin.Default()
    r.GET(&quot;/ping&quot;, func(c *gin.Context) {
        c.JSON(200, gin.H{
            &quot;message&quot;: &quot;pong&quot;,
        })
    })
    r.Run() // listen and serve on 0.0.0.0:8080 (for windows &quot;localhost:8080&quot;)
}</code></pre><p>##4 API Examples</p>
<p>Using GET, POST, PUT, PATCH, DELETE and OPTIONS</p>
<pre><code>func main() {
    // Creates a gin router with default middleware:
    // logger and recovery (crash-free) middleware
    router := gin.Default()

    router.GET(&quot;/someGet&quot;, getting)
    router.POST(&quot;/somePost&quot;, posting)
    router.PUT(&quot;/somePut&quot;, putting)
    router.DELETE(&quot;/someDelete&quot;, deleting)
    router.PATCH(&quot;/somePatch&quot;, patching)
    router.HEAD(&quot;/someHead&quot;, head)
    router.OPTIONS(&quot;/someOptions&quot;, options)

    // By default it serves on :8080 unless a
    // PORT environment variable was defined.
    router.Run()
    // router.Run(&quot;:3000&quot;) for a hard coded port
}</code></pre><p>Parameters in path</p>
<pre><code>func main() {
    router := gin.Default()

    // This handler will match /user/john but will not match /user/ or /user
    router.GET(&quot;/user/:name&quot;, func(c *gin.Context) {
        name := c.Param(&quot;name&quot;)
        c.String(http.StatusOK, &quot;Hello %s&quot;, name)
    })

    // However, this one will match /user/john/ and also /user/john/send
    // If no other routers match /user/john, it will redirect to /user/john/
    router.GET(&quot;/user/:name/*action&quot;, func(c *gin.Context) {
        name := c.Param(&quot;name&quot;)
        action := c.Param(&quot;action&quot;)
        message := name + &quot; is &quot; + action
        c.String(http.StatusOK, message)
    })

    // For each matched request Context will hold the route definition
    router.POST(&quot;/user/:name/*action&quot;, func(c *gin.Context) {
        c.FullPath() == &quot;/user/:name/*action&quot; // true
    })

    router.Run(&quot;:8080&quot;)
}</code></pre><p>Querystring parameters</p>
<pre><code>func main() {
    router := gin.Default()

    // Query string parameters are parsed using the existing underlying request object.
    // The request responds to a url matching:  /welcome?firstname=Jane&amp;lastname=Doe
    router.GET(&quot;/welcome&quot;, func(c *gin.Context) {
        firstname := c.DefaultQuery(&quot;firstname&quot;, &quot;Guest&quot;)
        lastname := c.Query(&quot;lastname&quot;) // shortcut for c.Request.URL.Query().Get(&quot;lastname&quot;)

        c.String(http.StatusOK, &quot;Hello %s %s&quot;, firstname, lastname)
    })
    router.Run(&quot;:8080&quot;)
}</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysql/mysql事务" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/mysql/mysql事务/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/mysql/mysql事务/">
        mysql事务
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1、原子性实现原理：Undo-log"><a href="#1、原子性实现原理：Undo-log" class="headerlink" title="1、原子性实现原理：Undo log"></a>1、原子性实现原理：Undo log</h1><pre><code>- Undo log是为了实现事务的原子性，在mysql数据库InnoDB存储引擎中，
还用Undo log来实现多版本并发控制（MVCC）
- 在操作任何数据之前，首先将数据备份到一个地方（这个存储数据备份的地方称为Undo log）.
然后进行数据修改。如果出现了错误或者用户执行了ROLLBACK语句，
系统可以利用undo log中的备份将数据恢复到事务之前的状态
- 注意：undo log是逻辑日志，可以理解为：
    - 当delete一条记录时，undo log中会记录一条对应的insert记录
    - 当insert一条记录时，undo log中会记录一条对应的delete记录
    - 当update一条记录时，undo log中会记录一条相反的update记录


（逻辑日志的意思是记录某一行数据的修改，物理日志是记录某一页的数据修改）</code></pre><h1 id="2、持久性原理：-Redo-log"><a href="#2、持久性原理：-Redo-log" class="headerlink" title="2、持久性原理： Redo log"></a>2、持久性原理： Redo log</h1><pre><code>- 和undo log相反，redo log记录的是新数据的备份。(异步写)
在事务提交前，只要将redo log持久化即可，不需要将数据持久化。
当系统崩溃时，虽然数据没有持久化，但是redo log已经持久化。
系统可以根据 redo log 的内容，将所有数据恢复到最新的状态
（innodb_flush_log_at_trx_commit）
WAL(write ahead log):预写日志</code></pre><p>当我们每次执行update,insert,delete等语句后，commit操作后，redo log执行持久化操作</p>
<p>innodb_flush_log_at_trx_commit = 0/1/2</p>
<pre><code>set global innodb_flush_log_at_trx_commit=2;
show variables like &apos;innodb_flush_log_at_trx_commit&apos;;</code></pre><p>默认值为：1</p>
<p>由于实时将数据刷到磁盘中，在并发条件下，性能较低，<br><img src="../mysql%E4%BA%8B%E5%8A%A1/1.png" alt></p>
<h1 id="3、mysql的隔离级别"><a href="#3、mysql的隔离级别" class="headerlink" title="3、mysql的隔离级别"></a>3、mysql的隔离级别</h1><ul>
<li>读未提交(read_uncommitted):对事务处理的读取没有任何限制；</li>
<li>读已提交(read_committed)：</li>
<li>可重复读(repeatable_read):默认级别</li>
<li>串行化(seriauzable)</li>
</ul>
<table>
<thead>
<tr>
<th align="center">事务的隔离级别</th>
<th align="center">脏读</th>
<th align="center">不可重复读</th>
<th align="center">幻读</th>
</tr>
</thead>
<tbody><tr>
<td align="center">读未提交(read_uncommitted)</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center">读已提交(read_committed)</td>
<td align="center"></td>
<td align="center">√</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center">可重复读(repeatable_read)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">√</td>
</tr>
<tr>
<td align="center">串行化(seriauzable)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h1 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h1><p>事务的并发执行，事务故障或系统故障  会对事务的一致性造成破坏</p>
<p>数据库系统通过并发控制技术和日志恢复技术来避免这种情况的发生：<br>    - 并发控制技术保证了事务的隔离性（加锁），使数据库的一致性状态不会<br>    因为并发执行的操作被破坏。<br>    - 日志恢复技术保证了事务的原子性，是一致性状态下不会因事务或系统故障被破坏。<br>    同时使已提交的对数据库的修改不会因为系统崩溃而丢失，保证了事务的持久性。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysql/mysql优化" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/mysql/mysql优化/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/mysql/mysql优化/">
        mysql优化
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#1、选择优化的数据类型</p>
<p>##1 更小的通常更好<br>一般情况下，应该尽量使用可以正确存储数据的最小的数据类型</p>
<pre><code>例如只需要存储 `0-200`， `tinyint unsigned`更好一些</code></pre><p>更小的数据类型通常更快，因为它们占用更少的磁盘、内存和CPU缓存，并且处理时需要的CPU周期也更少</p>
<p>##2 简单就好<br>简单数据类型的操作通常需要更少的CPU周期。</p>
<pre><code>例如，整型比字符型操作代价更低，因为字符集和校对规则（排序规则）是字符比较比整型比较更复杂。
ex: 一个是应该使用Mysql内建的类型(date,time,datetime)而不是字符串来存储日期和时间，另外一个是应该用整型存储IP地。</code></pre><p>##3 尽量避免NULL<br>很多表都包含可为NULL的列，即使应用程序并不需要保存NULL也是如此，这是因为NULL是列的默认属性。<br>通常情况下最好指定列为NOT NULL，除非真的需要存储NULL值。</p>
<p>如果查询中包含可为NULL的列，对Mysql来说更难优化，因为可为NULL的列使得索引、索引统计和值比较都更复杂。<br>可为NULL的列会使用更多的存储空间，在Mysql中也需要特殊处理。当可为NULL的列被索引时，每个索引记录需要一个额外的字节，<br>在MyISAM里甚至还可能导致固定大小的索引（例如只有一个整数列的索引）变成可变大小的索引。<br>通常此项改动对于InnoDB的性能提升比较小。InnoDB使用单独的位（bit）存储NULL值，所以对于稀疏数据有很好的空间效率。    </p>
<h1 id="优化工具"><a href="#优化工具" class="headerlink" title="优化工具"></a>优化工具</h1><h2 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h2><p><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html" target="_blank" rel="noopener">explain-output</a></p>
<h2 id="show-profile"><a href="#show-profile" class="headerlink" title="show-profile"></a>show-profile</h2><p><a href="https://dev.mysql.com/doc/refman/5.7/en/show-profile.html" target="_blank" rel="noopener">show-profile</a></p>
<p><strong>* The SHOW PROFILE and SHOW PROFILES statements are deprecated and will be removed in a future MySQL release.<br>Use the Performance Schema instead; <a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema-query-profiling.html" target="_blank" rel="noopener">see Section 25.19.1, “Query Profiling Using Performance Schema”</a>. *</strong></p>
<pre><code>set profiling=1;
select * from student;
show profile for query 1;
show profile all for query 1;
show profile all for query 1\G               (后面没有分号！！！)

---------------------------------------

mysql&gt; set profiling=1;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql&gt; select * from student;
+----+-----------+------+------+
| id | name      | age  | sex  |
+----+-----------+------+------+
|  1 | xiaoming  |   19 |    1 |
|  2 | xiaohong  |   18 |    0 |
|  3 | xiaolan   |   20 |    0 |
|  4 | xiaolv    |   20 |    0 |
|  5 | xiaohuang |   20 |    0 |
|  6 | 666       |   17 |    0 |
+----+-----------+------+------+
6 rows in set (0.00 sec)

mysql&gt; show profile for query 1;
+----------------------+----------+
| Status               | Duration |
+----------------------+----------+
| starting             | 0.000081 |
| checking permissions | 0.000011 |
| Opening tables       | 0.000019 |
| init                 | 0.000018 |
| System lock          | 0.000009 |
| optimizing           | 0.000006 |
| statistics           | 0.000016 |
| preparing            | 0.000013 |
| executing            | 0.000005 |
| Sending data         | 0.000056 |
| end                  | 0.000006 |
| query end            | 0.000009 |
| closing tables       | 0.000008 |
| freeing items        | 0.000013 |
| cleaning up          | 0.000016 |
+----------------------+----------+
15 rows in set, 1 warning (0.00 sec)

mysql&gt; show profile all for query 1;
+----------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-----------------------+----------------------+-------------+
| Status               | Duration | CPU_user | CPU_system | Context_voluntary | Context_involuntary | Block_ops_in | Block_ops_out | Messages_sent | Messages_received | Page_faults_major | Page_faults_minor | Swaps | Source_function       | Source_file          | Source_line |
+----------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-----------------------+----------------------+-------------+
| starting             | 0.000081 | 0.000032 |   0.000045 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | NULL                  | NULL                 |        NULL |
| checking permissions | 0.000011 | 0.000005 |   0.000006 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | check_access          | sql_authorization.cc |         809 |
| Opening tables       | 0.000019 | 0.000007 |   0.000010 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | open_tables           | sql_base.cc          |        5753 |
| init                 | 0.000018 | 0.000007 |   0.000011 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | handle_query          | sql_select.cc        |         128 |
| System lock          | 0.000009 | 0.000005 |   0.000006 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_lock_tables     | lock.cc              |         330 |
| optimizing           | 0.000006 | 0.000002 |   0.000004 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize              | sql_optimizer.cc     |         158 |
| statistics           | 0.000016 | 0.000007 |   0.000009 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize              | sql_optimizer.cc     |         374 |
| preparing            | 0.000013 | 0.000005 |   0.000008 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | optimize              | sql_optimizer.cc     |         482 |
| executing            | 0.000005 | 0.000002 |   0.000002 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | exec                  | sql_executor.cc      |         126 |
| Sending data         | 0.000056 | 0.000023 |   0.000033 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | exec                  | sql_executor.cc      |         202 |
| end                  | 0.000006 | 0.000002 |   0.000003 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | handle_query          | sql_select.cc        |         206 |
| query end            | 0.000009 | 0.000004 |   0.000006 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command | sql_parse.cc         |        4956 |
| closing tables       | 0.000008 | 0.000003 |   0.000004 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_execute_command | sql_parse.cc         |        5009 |
| freeing items        | 0.000013 | 0.000005 |   0.000008 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | mysql_parse           | sql_parse.cc         |        5622 |
| cleaning up          | 0.000016 | 0.000007 |   0.000008 |                 0 |                   0 |            0 |             0 |             0 |                 0 |                 0 |                 0 |     0 | dispatch_command      | sql_parse.cc         |        1931 |
+----------------------+----------+----------+------------+-------------------+---------------------+--------------+---------------+---------------+-------------------+-------------------+-------------------+-------+-----------------------+----------------------+-------------+
15 rows in set, 1 warning (0.00 sec)</code></pre><h2 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h2><p><a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema-quick-start.html" target="_blank" rel="noopener">performance-schema-quick-start</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/optimization.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/8.0/en/optimization.html</a></p>
<h1 id="分库分表"><a href="#分库分表" class="headerlink" title="分库分表"></a>分库分表</h1><p><a href="https://www.jianshu.com/p/5b2bb76d26d6" target="_blank" rel="noopener">分库分表</a></p>
<p><a href="https://www.bbsmax.com/A/xl56PpKYzr/" target="_blank" rel="noopener">mysql中间件分享（Mysql-prxoy,Atlas,DBProxy,Amoeba,cobar,TDDL）</a></p>
<h1 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h1><p><a href="https://blog.csdn.net/A_man_only/article/details/84257702" target="_blank" rel="noopener">MTS： 并行复制技术</a></p>
<h1 id="读写分离"><a href="#读写分离" class="headerlink" title="读写分离"></a>读写分离</h1>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-mysql/mysql索引" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/03/18/mysql/mysql索引/" class="article-date">
  	<time datetime="2020-03-18T10:43:55.000Z" itemprop="datePublished">2020-03-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/18/mysql/mysql索引/">
        mysql索引
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="MYISAM"><a href="#MYISAM" class="headerlink" title="MYISAM"></a>MYISAM</h1><p><a href="https://dev.mysql.com/doc/refman/5.7/en/myisam-storage-engine.html" target="_blank" rel="noopener">MyISAM简介</a></p>
<p>每个MyISAM表都以三个文件存储在磁盘上。这些文件的名称以表名开头，并具有扩展名以指示文件类型。一个.frm 文件存储表格式。数据文件的 扩展名为.MYD（MYData）。索引文件的扩展名为.MYI （MYIndex）。</p>
<p>要明确指定要使用MyISAM 表，使用ENGINE表选项进行指示：</p>
<pre><code>CREATE TABLE t (i INT) ENGINE = MYISAM;</code></pre><p><code>MyISAM</code> 表具有以下特征：</p>
<ul>
<li><p>所有数据值都先以低字节存储。这使数据机和操作系统独立。二进制可移植性的唯一要求是机器使用二进制补码带符号整数和IEEE浮点格式。这些要求已在主流机器中广泛使用。二进制兼容性可能不适用于有时具有特殊处理器的嵌入式系统。</p>
<p>先存储低字节数据没有明显的速度损失；表行中的字节通常是未对齐的，按顺序读取未对齐的字节所需的处理要多于反向顺序。而且，与其他代码相比，服务器中获取列值的代码不是时间紧迫的。</p>
</li>
<li><p>所有数字键值都先存储高字节，以实现更好的索引压缩。</p>
</li>
<li><p>在支持大文件的文件系统和操作系统上，支持大文件（文件长度最大为63位）。</p>
</li>
<li><p>表格中 最多只能 有（2^32）2（1.844E + 19）行<code>MyISAM</code>。</p>
</li>
<li><p>每个<code>MyISAM</code> 表的最大索引数为64。</p>
<p>每个索引的最大列数为16。</p>
</li>
<li><p>最大密钥长度为1000个字节。也可以通过更改源代码并重新编译来更改。对于密钥超过250字节的情况，将使用比默认值1024字节更大的密钥块大小。</p>
</li>
<li><p>当按排序顺序插入行时（如使用 <code>AUTO_INCREMENT</code>列时），索引树将被拆分，以便高级节点仅包含一个键。这样可以提高索引树中的空间利用率。</p>
</li>
<li><p><code>AUTO_INCREMENT</code> 支持每个表 对一列的内部处理。<code>MyISAM</code> 自动更新此列的 <a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" target="_blank" rel="noopener"><code>INSERT</code></a>和 <a href="https://dev.mysql.com/doc/refman/5.7/en/update.html" target="_blank" rel="noopener"><code>UPDATE</code></a>操作。这样可使 <code>AUTO_INCREMENT</code>列更快（至少10％）。序列顶部的值在删除后不会重复使用。（当一<code>AUTO_INCREMENT</code>列定义为多列索引的最后一列时，确实会重复使用从序列顶部删除的值。）<code>AUTO_INCREMENT</code>可以使用<a href="https://dev.mysql.com/doc/refman/5.7/en/alter-table.html" target="_blank" rel="noopener"><code>ALTER TABLE</code></a>或 <a href="https://dev.mysql.com/doc/refman/5.7/en/myisamchk.html" target="_blank" rel="noopener"><strong>myisamchk</strong></a>重置该 值 。</p>
</li>
<li><p>将删除与更新和插入混合在一起时，动态大小的行的碎片化要少得多。通过自动组合相邻的已删除块并通过扩展块（如果删除下一个块）来完成此操作。</p>
</li>
<li><p><code>MyISAM</code>支持并发插入：如果表在数据文件的中间没有空闲块，则可以<a href="https://dev.mysql.com/doc/refman/5.7/en/insert.html" target="_blank" rel="noopener"><code>INSERT</code></a>在其他线程从表读取数据 的同时向其中添加新行。由于删除行或使用比当前内容更多的数据更新动态长度行，可能会出现空闲块。当所有可用块用完（填充）时，以后的插入将再次并发。请参见 <a href="https://dev.mysql.com/doc/refman/5.7/en/concurrent-inserts.html" target="_blank" rel="noopener">第8.11.3节“并发插入”</a>。</p>
</li>
<li><p>您可以将数据文件和索引文件放在不同物理设备上的不同目录中，以使用<code>DATA DIRECTORY</code>和的<code>INDEX DIRECTORY</code>表选项来提高速度<a href="https://dev.mysql.com/doc/refman/5.7/en/create-table.html" target="_blank" rel="noopener"><code>CREATE TABLE</code></a>。请参见<a href="https://dev.mysql.com/doc/refman/5.7/en/create-table.html" target="_blank" rel="noopener">第13.1.18节“ CREATE TABLE语句”</a>。</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/5.7/en/blob.html" target="_blank" rel="noopener"><code>BLOB</code></a>并且 <a href="https://dev.mysql.com/doc/refman/5.7/en/blob.html" target="_blank" rel="noopener"><code>TEXT</code></a>列可以建立索引。</p>
</li>
<li><p><code>NULL</code>索引列中允许使用值。每个密钥占用0到1个字节。</p>
</li>
<li><p>每个字符列可以具有不同的字符集。请参见 <a href="https://dev.mysql.com/doc/refman/5.7/en/charset.html" target="_blank" rel="noopener">第10章，<em>字符集，整理，Unicode</em></a>。</p>
</li>
<li><p><code>MyISAM</code>索引文件中 有一个标志，指示表是否已正确关闭。如果 使用系统变量集启动 <a href="https://dev.mysql.com/doc/refman/5.7/en/mysqld.html" target="_blank" rel="noopener"><strong>mysqld</strong></a><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_myisam_recover_options" target="_blank" rel="noopener"><code>myisam_recover_options</code></a>，<code>MyISAM</code>则在打开表时会自动对其进行检查，如果未正确关闭表，则会对其进行修复。</p>
</li>
<li><p>如果使用该<a href="https://dev.mysql.com/doc/refman/5.7/en/myisamchk-check-options.html#option_myisamchk_update-state" target="_blank" rel="noopener"><code>--update-state</code></a> 选项运行<a href="https://dev.mysql.com/doc/refman/5.7/en/myisamchk.html" target="_blank" rel="noopener"> <strong>myisamchk</strong></a>，则将表标记为已选中。<a href="https://dev.mysql.com/doc/refman/5.7/en/myisamchk.html" target="_blank" rel="noopener"><strong>myisamchk –fast</strong></a>仅检查那些没有此标记的表。</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/5.7/en/myisamchk.html" target="_blank" rel="noopener"><strong>myisamchk –analyze</strong></a>存储部分键以及整个键的统计信息。</p>
</li>
<li><p><a href="https://dev.mysql.com/doc/refman/5.7/en/myisampack.html" target="_blank" rel="noopener"><strong>myisampack</strong></a>可以包装<a href="https://dev.mysql.com/doc/refman/5.7/en/blob.html" target="_blank" rel="noopener"><code>BLOB</code></a>和 包装 <a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>。</p>
<p><code>MyISAM</code> 还支持以下功能：</p>
</li>
<li><p>支持真实<a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>类型；一<a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>列开始与存储在一个或两个字节的长度。</p>
</li>
<li><p>带<a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>列的表可能具有固定或动态的行长。</p>
</li>
<li><p>表格中<a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>和 的长度之 和 <a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>CHAR</code></a>可能不超过64KB。</p>
</li>
<li><p>任意长度限制<code>UNIQUE</code>。</p>
<h1 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h1></li>
</ul>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-introduction.html" target="_blank" rel="noopener">InnoDB简介</a><br><code>InnoDB</code>是一种兼顾了高可靠性和高性能的通用存储引擎。在MySQL 5.7中，<code>InnoDB</code>是默认的MySQL存储引擎。除非配置了其他默认存储引擎，否则发出<a href="https://dev.mysql.com/doc/refman/5.7/en/create-table.html" target="_blank" rel="noopener"><code>CREATE TABLE</code></a>不带<code>ENGINE=</code> 子句的语句将创建一个<code>InnoDB</code>表。</p>
<h3 id="InnoDB的主要优势"><a href="#InnoDB的主要优势" class="headerlink" title="InnoDB的主要优势"></a>InnoDB的主要优势</h3><ul>
<li>它的<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_dml" target="_blank" rel="noopener">DML</a>操作遵循 <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_acid" target="_blank" rel="noopener">ACID</a>模型，并 具有具有 <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_commit" target="_blank" rel="noopener">提交</a>，<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_rollback" target="_blank" rel="noopener">回滚</a>和 <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_crash_recovery" target="_blank" rel="noopener">崩溃恢复</a> 功能的<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_transaction" target="_blank" rel="noopener">事务</a>， 以保护用户数据。 <a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-acid.html" target="_blank" rel="noopener">第14.2节“ InnoDB和ACID模型”</a>。</li>
<li>行级<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_locking" target="_blank" rel="noopener">锁定</a>和Oracle风格的<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_consistent_read" target="_blank" rel="noopener">一致读取可</a>提高多用户并发性和性能。<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-locking-transaction-model.html" target="_blank" rel="noopener">第14.7节“ InnoDB锁定和事务模型”</a>。</li>
<li><code>InnoDB</code>表格将您的数据安排在磁盘上，以基于<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_primary_key" target="_blank" rel="noopener">主键</a>优化查询 。每个 <code>InnoDB</code>表都有一个称为<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_clustered_index" target="_blank" rel="noopener">聚集索引</a>的主键索引，该<a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_clustered_index" target="_blank" rel="noopener">索引</a> 组织数据以最小化主键查找的I / O。<a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-index-types.html" target="_blank" rel="noopener">第14.6.2.1节“聚集索引和二级索引”</a>。</li>
<li>维护数据 <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_referential_integrity" target="_blank" rel="noopener">完整性</a>， <code>InnoDB</code>支持 <a href="https://dev.mysql.com/doc/refman/5.7/en/glossary.html#glos_foreign_key" target="_blank" rel="noopener"><code>FOREIGN KEY</code></a>约束。使用外键检查插入，更新和删除，以确保它们不会导致不同表之间的不一致。 <a href="https://dev.mysql.com/doc/refman/5.7/en/create-table-foreign-keys.html" target="_blank" rel="noopener">第13.1.18.6节“外键约束”</a>。</li>
</ul>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p><a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-indexes.html" target="_blank" rel="noopener">How MySQL Uses Indexes</a></p>
<pre><code>叶子节点放的数据不是实际数据，而是主键值。然后回表。
查询时是两颗B+树，一颗索引树，一个原来的B+树</code></pre><h2 id="全文索引"><a href="#全文索引" class="headerlink" title="全文索引"></a><a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-search.html" target="_blank" rel="noopener">全文索引</a></h2><ul>
<li><p>MySQL支持全文索引和搜索：</p>
<ul>
<li>MySQL中的全文索引是type的索引 <code>FULLTEXT</code>。</li>
<li>全文索引只能使用InnoDB或MyISAM表格，并且只能用于创建CHAR，VARCHAR或 TEXT列。</li>
<li>MySQL提供了一个内置的全文ngram解析器，该解析器支持中文，日文和韩文（CJK），以及一个用于日语的可安装的MeCab全文分析器插件。<a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-search-ngram.html" target="_blank" rel="noopener">第12.9.8节“ ngram全文解析器”</a>和 <a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-search-mecab.html" target="_blank" rel="noopener">第12.9.9节“ MeCab全文解析器插件”</a>中概述了解析差异。</li>
<li>甲<code>FULLTEXT</code>索引定义可以在被给予CREATE TABLE的语句中创建表时，或者稍后使用添加ALTER TABLE或 CREATE INDEX。</li>
<li>对于大型数据集，将数据加载到没有<code>FULLTEXT</code>索引的表中然后再创建索引比将数据加载到具有现有<code>FULLTEXT</code>索引的表中要快得多。</li>
</ul>
<p>全文搜索分为三种：</p>
</li>
<li><p>自然语言搜索将搜索字符串解释为自然人类语言中的短语（自由文本中的短语）。除双引号（“）字符外，没有特殊的运算符。适用停用词列表。有关停用词列表的更多信息，请参见<a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-stopwords.html" target="_blank" rel="noopener">第12.9.4节“全文停用词 “</a>。</p>
<p>如果指定了<code>IN NATURAL LANGUAGE MODE</code>修饰符或未指定修饰符，则全文搜索是自然语言搜索 。有关更多信息，请参见 <a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-natural-language.html" target="_blank" rel="noopener">第12.9.1节“自然语言全文本搜索”</a>。</p>
</li>
<li><p>布尔搜索使用特殊查询语言的规则解释搜索字符串。该字符串包含要搜索的单词。它还可以包含指定要求的运算符，以使匹配行中的单词必须存在或不存在，或者其权重应高于或低于平常。某些常见单词（停用词）将从搜索索引中省略，并且如果出现在搜索字符串中则不匹配。该<code>IN BOOLEAN MODE</code>修饰符指定一个布尔搜索。有关更多信息，请参见 <a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-boolean.html" target="_blank" rel="noopener">第12.9.2节“布尔全文本搜索”</a>。</p>
</li>
<li><p>查询扩展搜索是对自然语言搜索的修改。搜索字符串用于执行自然语言搜索。然后，将搜索返回的最相关行中的单词添加到搜索字符串中，然后再次执行搜索。该查询返回第二个搜索中的行。该<code>IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION</code>或<code>WITH QUERY EXPANSION</code>修改指定的查询扩展搜索。有关更多信息，请参见 <a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-query-expansion.html" target="_blank" rel="noopener">第12.9.3节“具有查询扩展的全文本搜索”</a>。</p>
</li>
</ul>
<h2 id="哈希索引"><a href="#哈希索引" class="headerlink" title="哈希索引"></a><a href="https://dev.mysql.com/doc/refman/5.7/en/index-btree-hash.html" target="_blank" rel="noopener">哈希索引</a></h2><p>只有memony引擎显示支持哈希索引</p>
<ul>
<li>仅用于使用<code>=</code>or <code>&lt;=&gt;</code> 运算符的相等比较 （但非常快），不用于比较运算符 </li>
<li>优化器无法使用哈希索引来加快<code>ORDER BY</code>操作速度 </li>
<li>仅整个键可用于搜索行 </li>
</ul>
<h2 id="组合索引"><a href="#组合索引" class="headerlink" title="组合索引"></a>组合索引</h2><p><a href="https://www.jianshu.com/p/35588ecf33c1" target="_blank" rel="noopener">mysql的联合索引的B+树</a></p>
<h4 id="有number-name-age-adds四个列时，组合索引-number-age-adds"><a href="#有number-name-age-adds四个列时，组合索引-number-age-adds" class="headerlink" title="有number name age adds四个列时，组合索引 (number age adds)"></a>有number name age adds四个列时，组合索引 (number age adds)</h4><p><code>explain select * from bigtables where number = 101 and age &gt;18 and adds =18;</code>走联合索引number的索引,Using index condition</p>
<pre><code>mysql&gt; explain select * from bigtables where number = 101 and age &gt;18 and adds =18;
+----+-------------+-----------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+
| id | select_type | table     | partitions | type  | possible_keys | key  | key_len | ref  | rows | filtered | Extra                 |
+----+-------------+-----------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+
|  1 | SIMPLE      | bigtables | NULL       | range | idx           | idx  | 10      | NULL |  104 |    10.00 | Using index condition |
+----+-------------+-----------+------------+-------+---------------+------+---------+------+------+----------+-----------------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p><code>explain select * from bigtables where number = 101 and age like &#39;1%&#39; and adds =18;</code>走联合索引number的索引</p>
<pre><code>mysql&gt; explain select * from bigtables where number = 101 and age like &apos;1%&apos; and adds =18;
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra                 |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
|  1 | SIMPLE      | bigtables | NULL       | ref  | idx           | idx  | 5       | const |  106 |     1.11 | Using index condition |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p><code>explain select * from bigtables where number = 101 and age like &#39;%9&#39; and adds =18;</code>走联合索引number的索引</p>
<pre><code>mysql&gt; explain select * from bigtables where number = 101 and age like &apos;%9&apos; and adds =18;
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra                 |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
|  1 | SIMPLE      | bigtables | NULL       | ref  | idx           | idx  | 5       | const |  106 |     1.11 | Using index condition |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-----------------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p><code>explain select * from bigtables where age like &#39;%9&#39; and adds =18;</code> 不走索引</p>
<pre><code>mysql&gt; explain select * from bigtables where age like &apos;%9&apos; and adds =18;
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 1010 |     1.11 | Using where |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p><code>explain select * from bigtables where adds =18;</code>不走索引</p>
<pre><code>mysql&gt; explain select * from bigtables where adds =18;
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 1010 |    10.00 | Using where |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)</code></pre><h2 id="B-tree和B-tree"><a href="#B-tree和B-tree" class="headerlink" title="B tree和B+ tree"></a>B tree和B+ tree</h2><h2 id="单列索引"><a href="#单列索引" class="headerlink" title="单列索引"></a>单列索引</h2><ul>
<li><p>聚集索引</p>
</li>
<li><p>非聚集索引</p>
</li>
</ul>
<h2 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h2><p><a href="https://zhuanlan.zhihu.com/p/62020571" target="_blank" rel="noopener">为什么不推荐使用外键约束</a></p>
<p><a href="https://dev.mysql.com/doc/refman/5.7/en/foreign-key-optimization.html" target="_blank" rel="noopener">foreign-key-optimization</a></p>
<h2 id="索引覆盖"><a href="#索引覆盖" class="headerlink" title="索引覆盖"></a><a href="https://dev.mysql.com/doc/refman/5.7/en/index-merge-optimization.html" target="_blank" rel="noopener">索引覆盖</a></h2><p>当sql语句的所求查询字段（select列）和查询条件字段（where子句）全都包含在一个索引中，可以直接使用索引查询而不需要回表。这就是<a href="https://dev.mysql.com/doc/refman/5.7/en/index-merge-optimization.html" target="_blank" rel="noopener">索引覆盖</a>，通过使用覆盖索引，可以减少搜索树的次数，是常用的性能优化手段。</p>
<pre><code>mysql&gt; explain select number, age, adds from bigtables where  number = 101;
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ref  | idx           | idx  | 5       | const |  106 |   100.00 | Using index |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p>两个单列索引，查询也能触发索引覆盖</p>
<p>组合索引也可以触发索引覆盖</p>
<h2 id="索引下推"><a href="#索引下推" class="headerlink" title="索引下推"></a>索引下推</h2><p>对于bigtables表，我们现在有（name,number）联合索引<br> 如果现在有一个需求，查出名称中以“w”开头且number小于等于101的信息，语句如下：</p>
<pre><code>&quot;select * from bigtables where name like &apos;w%&apos; and number&gt; 10;&quot;.</code></pre><p> 语句有两种执行可能：</p>
<ul>
<li><p>1、根据（name,number）联合索引查询所有满足名称以“w”开头的索引，然后回表查询出相应的全行数据，然后再筛选出满足number小于等于101的用户数据。</p>
</li>
<li><p>2、根据（name,number）联合索引查询所有满足名称以“w”开头的索引，然后直接再筛选出number小于等于101的索引，之后再回表查询全行数据。 </p>
</li>
</ul>
<p>明显的，第二种方式需要回表查询的全行数据比较少，这就是mysql的索引下推。<br>mysql默认启用索引下推，我们也可以通过修改系统变量optimizer_switch的index_condition_pushdown标志来控制 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET optimizer_switch = &apos;index_condition_pushdown=off&apos;;</span><br></pre></td></tr></table></figure>

<p>注意点：<br> 1、innodb引擎的表，索引下推只能用于二级索引。</p>
<p>就像之前提到的，innodb的主键索引树叶子结点上保存的是全行数据，所以这个时候索引下推并不会起到减少查询全行数据的效果。</p>
<p>2、索引下推一般可用于所求查询字段（select列）不是/不全是联合索引的字段，查询条件为多条件查询且查询条件子句（where/order by）字段全是联合索引。</p>
<p>假设表t有联合索引（a,b）,下面语句可以使用索引下推提高效率<br> select * from t where a &gt; 2 and b &gt; 10;</p>
<p><a href="https://www.jianshu.com/p/bdc9e57ccf8b" target="_blank" rel="noopener">参考:  mysql索引篇之覆盖索引、联合索引、索引下推</a></p>
<h2 id="最左匹配"><a href="#最左匹配" class="headerlink" title="最左匹配"></a>最左匹配</h2><h2 id="like会不会走索引"><a href="#like会不会走索引" class="headerlink" title="like会不会走索引"></a>like会不会走索引</h2><p>根据最左匹配原则：</p>
<p><code>where like &#39;%ssss%&#39; ;</code>不走索引</p>
<p><code>where like &#39;ssss%&#39;；</code> 走索引</p>
<p><code>where like &#39;%ssss&#39;；</code> 不走索引</p>
<h2 id="优化小细节"><a href="#优化小细节" class="headerlink" title="优化小细节"></a>优化小细节</h2><h3 id="数据库操作层面"><a href="#数据库操作层面" class="headerlink" title="数据库操作层面"></a>数据库操作层面</h3><h4 id="1-不要使用表达式"><a href="#1-不要使用表达式" class="headerlink" title="1 不要使用表达式"></a>1 不要使用表达式</h4><p>虽然执行计划中有可能会判断走索引，但是 rows依然是全表扫描了，1010条</p>
<pre><code>mysql&gt; explain select * from bigtables where number+1  = 103;
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ALL  | NULL          | NULL | NULL    | NULL | 1010 |   100.00 | Using where |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; explain select * from bigtables where number = 103;
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
|  1 | SIMPLE      | bigtables | NULL       | ref  | idx           | idx  | 5       | const |   98 |   100.00 | NULL  |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
1 row in set, 1 warning (0.00 sec)</code></pre><h4 id="2-使用索引扫描进行排序时"><a href="#2-使用索引扫描进行排序时" class="headerlink" title="2 使用索引扫描进行排序时"></a>2 使用索引扫描进行排序时</h4><p> <a href="https://blog.csdn.net/csdn_kenneth/article/details/82942137" target="_blank" rel="noopener">为排序使用索引Order By优化</a> </p>
<p>mysql默认的排序是asc。</p>
<p>多个排序时，一个逆序，其他asc的时候也不会走索引排序，而同时都desc时候，不会走索引排序<br><img src="..%5Cmysql%E7%B4%A2%E5%BC%95%5C%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%89%AB%E6%8F%8F%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F.png" alt="使用索引扫描进行排序"><br>或者一个是desc，也不会走索引排序。<code>Using filesort</code></p>
<pre><code>mysql&gt; explain select * from abc2 where c &gt;1 order by c desc;
+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+
| id | select_type | table | partitions | type  | possible_keys | key     | key_len | ref  | rows | filtered | Extra                                    |
+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+
|  1 | SIMPLE      | abc2  | NULL       | index | NULL          | idx_abc | 72      | NULL |    3 |    33.33 | Using where; Using index; Using filesort |
+----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+------------------------------------------+
1 row in set, 1 warning (0.00 sec)

ERROR: 
No query specified</code></pre><h4 id="3-union-all（执行计划分多步执行）-in-or"><a href="#3-union-all（执行计划分多步执行）-in-or" class="headerlink" title="3 union all（执行计划分多步执行）, in, or"></a>3 union all（执行计划分多步执行）, in, or</h4><p>or</p>
<pre><code>number,age为联合索引：
mysql&gt; explain select * from bigtables where number = 103 or age = 19;
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ALL  | idx           | NULL | NULL    | NULL | 1010 |    19.00 | Using where |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)

a b c为单列索引：
mysql&gt; explain select * from abc where b = 2 or c = 3;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | abc   | NULL       | ALL  | idx_b,idx_c   | NULL | NULL    | NULL |   10 |    23.50 | Using where |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)</code></pre><p>union all执行计划分多步执行</p>
<pre><code>mysql&gt; explain select * from abc  union all  select * from abc2\G;
*************************** 1. row ***************************
           id: 1
  select_type: PRIMARY
        table: abc
   partitions: NULL
         type: index
possible_keys: NULL
          key: idx_abc
      key_len: 14
          ref: NULL
         rows: 3
     filtered: 100.00
        Extra: Using index
*************************** 2. row ***************************
           id: 2
  select_type: UNION
        table: abc2
   partitions: NULL
         type: index
possible_keys: NULL
          key: idx_abc
      key_len: 72
          ref: NULL
         rows: 3
     filtered: 100.00
        Extra: Using index
2 rows in set, 1 warning (0.00 sec)

ERROR: 
No query specified</code></pre><p>in </p>
<pre><code>mysql&gt; explain select * from bigtables where number in (101);
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref   | rows | filtered | Extra |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
|  1 | SIMPLE      | bigtables | NULL       | ref  | idx           | idx  | 5       | const |  106 |   100.00 | NULL  |
+----+-------------+-----------+------------+------+---------------+------+---------+-------+------+----------+-------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; explain select * from bigtables where number in (101,102);
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
| id | select_type | table     | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra       |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
|  1 | SIMPLE      | bigtables | NULL       | ALL  | idx           | NULL | NULL    | NULL | 1010 |    21.68 | Using where |
+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
1 row in set, 1 warning (0.00 sec)</code></pre><h4 id="4-类型转换可能会造成索引失效"><a href="#4-类型转换可能会造成索引失效" class="headerlink" title="4 类型转换可能会造成索引失效"></a>4 类型转换可能会造成索引失效</h4><p>ex: name 为varchar 时，where name = 123 会造成索引失效</p>
<p><a href="https://blog.csdn.net/prince_mujia/article/details/104799176" target="_blank" rel="noopener">MySQL小结：锁-3.1.2 行锁变表锁</a></p>
<h4 id="5-对于数据库中不常用数据可以进行备份或者压缩操作，减少数据库压力"><a href="#5-对于数据库中不常用数据可以进行备份或者压缩操作，减少数据库压力" class="headerlink" title="5 对于数据库中不常用数据可以进行备份或者压缩操作，减少数据库压力"></a>5 对于数据库中不常用数据可以进行备份或者压缩操作，减少数据库压力</h4><h4 id="6-使用explain进行检查"><a href="#6-使用explain进行检查" class="headerlink" title="6 使用explain进行检查"></a>6 使用explain进行检查</h4><p><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html" target="_blank" rel="noopener">EXPLAIN Output Format</a></p>
<h5 id="rows"><a href="#rows" class="headerlink" title="rows:"></a>rows:</h5><p>官网中有一句话：</p>
<pre><code>rows (JSON name: rows)

The rows column indicates the number of rows MySQL believes it must examine to execute the query.

For InnoDB tables, this number is an estimate, and may not always be exact.
//对于InnoDB表，此数字是估计值，可能并不总是准确的。</code></pre><h5 id="type"><a href="#type" class="headerlink" title="type:"></a>type:</h5><table>
<thead>
<tr>
<th>type</th>
<th>JSON名称</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_id" target="_blank" rel="noopener"><code>id</code></a></td>
<td><code>select_id</code></td>
<td>该<code>SELECT</code>标识符</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_select_type" target="_blank" rel="noopener"><code>select_type</code></a></td>
<td>None</td>
<td>该<code>SELECT</code>类型</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_table" target="_blank" rel="noopener"><code>table</code></a></td>
<td><code>table_name</code></td>
<td>输出行表</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_partitions" target="_blank" rel="noopener"><code>partitions</code></a></td>
<td><code>partitions</code></td>
<td>匹配的分区</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_type" target="_blank" rel="noopener"><code>type</code></a></td>
<td><code>access_type</code></td>
<td>联接类型</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_possible_keys" target="_blank" rel="noopener"><code>possible_keys</code></a></td>
<td><code>possible_keys</code></td>
<td>可能的索引选择</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_key" target="_blank" rel="noopener"><code>key</code></a></td>
<td><code>key</code></td>
<td>实际选择的索引</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_key_len" target="_blank" rel="noopener"><code>key_len</code></a></td>
<td><code>key_length</code></td>
<td>所选键的长度</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_ref" target="_blank" rel="noopener"><code>ref</code></a></td>
<td><code>ref</code></td>
<td>与索引比较的列</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_rows" target="_blank" rel="noopener"><code>rows</code></a></td>
<td><code>rows</code></td>
<td>估计要检查的行</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_filtered" target="_blank" rel="noopener"><code>filtered</code></a></td>
<td><code>filtered</code></td>
<td>按表条件过滤的行百分比</td>
</tr>
<tr>
<td><a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html#explain_extra" target="_blank" rel="noopener"><code>Extra</code></a></td>
<td>None</td>
<td>附加信息</td>
</tr>
</tbody></table>
<h5 id="Extra"><a href="#Extra" class="headerlink" title="Extra:"></a>Extra:</h5><p>Using index condition: 通过访问索引并首先对其进行测试以确定是否读取完整的表行来读取表。除非有必要，否则索引信息将用 <code>索引下推</code> 读取整个表行</p>
<p>Using index：仅使用索引树中的信息从表中检索列信息，而不必进行其他查找以读取实际行。</p>
<p>Using filesort：MySQL必须额外进行一遍，以找出如何按排序顺序检索行。排序是通过根据联接类型遍历所有行并存储与该WHERE子句匹配的所有行的排序键和指向该行的指针来完成的。然后对键进行排序，并按排序顺序检索行。</p>
<p>Using join buffer (Block Nested Loop)， Using join buffer (Batched Key Access)：来自较早联接的表被部分读取到联接缓冲区中，然后从缓冲区中使用它们的行来执行与当前表的联接。 </p>
<p>Using temporary：为了解决该查询，MySQL需要创建一个临时表来保存结果。如果查询包含GROUP BY和 ORDER BY子句以不同的方式列出列，通常会发生这种情况。</p>
<p>Using where：WHERE子句用于限制来匹配下一个表或发送到客户端的行。</p>
<h4 id="7-查看查询语句每一个步骤的时间"><a href="#7-查看查询语句每一个步骤的时间" class="headerlink" title="7 查看查询语句每一个步骤的时间"></a>7 查看查询语句每一个步骤的时间</h4><p><a href="https://dev.mysql.com/doc/refman/5.7/en/show-profile.html" target="_blank" rel="noopener">show-profile</a></p>
<p>官网中有一句话：该SHOW PROFILE和 SHOW PROFILES语句被取消，并将在未来的MySQL版本中删除，改用性能模式；</p>
<p> The <a href="https://dev.mysql.com/doc/refman/5.7/en/show-profile.html" target="_blank" rel="noopener"><code>SHOW PROFILE</code></a> and <a href="https://dev.mysql.com/doc/refman/5.7/en/show-profiles.html" target="_blank" rel="noopener"><code>SHOW PROFILES</code></a> statements are deprecated and will be removed in a future MySQL release. Use the <a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema.html" target="_blank" rel="noopener">Performance Schema</a> instead; see <a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema-query-profiling.html" target="_blank" rel="noopener">Section 25.19.1, “Query Profiling Using Performance Schema”</a>. </p>
<pre><code>SET profiling = 1;

select * from abc;

SHOW PROFILE FOR QUERY 1; //  SHOW PROFILES;
+----------------------+----------+
| Status               | Duration |
+----------------------+----------+
| starting             | 0.000056 |
| checking permissions | 0.000010 |
| Opening tables       | 0.000029 |
| init                 | 0.000019 |
| System lock          | 0.000011 |
| optimizing           | 0.000006 |
| statistics           | 0.000012 |
| preparing            | 0.000009 |
| executing            | 0.000003 |
| Sending data         | 0.000053 |
| end                  | 0.000006 |
| query end            | 0.000009 |
| closing tables       | 0.000009 |
| freeing items        | 0.000014 |
| cleaning up          | 0.000013 |
+----------------------+----------+
15 rows in set, 1 warning (0.00 sec)</code></pre><h4 id="8-数据库性能监控-Performance-Schema"><a href="#8-数据库性能监控-Performance-Schema" class="headerlink" title="8 数据库性能监控 Performance Schema"></a>8 数据库性能监控 Performance Schema</h4><p><a href="https://dev.mysql.com/doc/refman/5.7/en/performance-schema-query-profiling.html" target="_blank" rel="noopener">使用性能模式进行查询分析</a></p>
<h4 id="9-数据库参数设置：线程池等。。。"><a href="#9-数据库参数设置：线程池等。。。" class="headerlink" title="9 数据库参数设置：线程池等。。。"></a>9 数据库参数设置：线程池等。。。</h4><h3 id="数据库设计层面"><a href="#数据库设计层面" class="headerlink" title="数据库设计层面"></a>数据库设计层面</h3><h4 id="1-索引一定要加适量"><a href="#1-索引一定要加适量" class="headerlink" title="1 索引一定要加适量"></a>1 索引一定要加适量</h4><p>创建索引会使查询操作变得更加快速,但是会降低增加、删除、更新操作的速度,因为执行这些操作的同时会对索引文件进行重新排序或更新; </p>
<h4 id="2-考虑前缀索引"><a href="#2-考虑前缀索引" class="headerlink" title="2 考虑前缀索引"></a>2 考虑前缀索引</h4><p>前缀索引是一种能使索引更小，更快的有效办法</p>
<p>注意：MySQL中无法使用前缀索引进行ORDER BY和GROUP BY，也无法用来进行覆盖扫描</p>
<p><a href="https://www.cnblogs.com/balfish/p/9003794.html" target="_blank" rel="noopener">MySQL前缀索引和索引选择性</a></p>
<h4 id="3-更新十分频繁，数据区分度不高的字段不推荐建立索引"><a href="#3-更新十分频繁，数据区分度不高的字段不推荐建立索引" class="headerlink" title="3 更新十分频繁，数据区分度不高的字段不推荐建立索引"></a>3 更新十分频繁，数据区分度不高的字段不推荐建立索引</h4><ul>
<li>sex: 男，女  </li>
<li>更新会变动B+树，更新频繁的字段建立索引会大大降低数据库性能</li>
</ul>
<h4 id="4-创建索引的列，不允许为null"><a href="#4-创建索引的列，不允许为null" class="headerlink" title="4 创建索引的列，不允许为null"></a>4 创建索引的列，不允许为null</h4><h4 id="5-当需要表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致"><a href="#5-当需要表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致" class="headerlink" title="5 当需要表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致"></a>5 当需要表连接的时候，最好不要超过三张表，因为需要join的字段，数据类型必须一致</h4><h4 id="6-表设计时字段优化"><a href="#6-表设计时字段优化" class="headerlink" title="6 表设计时字段优化"></a>6 表设计时字段优化</h4><ul>
<li>尽可能选择小的数据类型  ex: <code>tinyint</code></li>
<li>字段不要过多，取名见名思义，加注释，预留字段供扩展</li>
</ul>
<p><a href="https://www.jianshu.com/p/f2a43a425223" target="_blank" rel="noopener">MySQL数据库表结构设计优化技巧</a></p>
<h3 id="全表扫描"><a href="#全表扫描" class="headerlink" title="全表扫描"></a>全表扫描</h3><p><a href="https://dev.mysql.com/doc/refman/5.7/en/table-scan-avoidance.html" target="_blank" rel="noopener">table-scan-avoidance</a></p>
<p> 使用EXPLAIN分析SQL时，当列出执行计划表中type字段值为ALL时，代表需要全表扫描 ，mysql会在一下情况使用全表扫描：</p>
<ul>
<li>所扫描的数据表非常小，因此全表扫描的速度要远快于使用索引， 对于少于10行且行长较短的表 </li>
<li>在ON或WHERE子句中没有可以使用的索引列  </li>
<li>在使用索引列与常量值比较，并且MySQL服务已经通过索引树计算出常量值覆盖了大部分表数据，此时使用全表扫描是比较快的。 </li>
<li>当前正在使用一个对于其他列来说基数较低的索引(每个索引值在另一列都有多行行对应)，在这种情况下，使用索引可能会引起较多的索引查询，MySQL认为全表扫描比较快。 </li>
</ul>
<h5 id="避免全表扫描"><a href="#避免全表扫描" class="headerlink" title="避免全表扫描"></a><strong>避免全表扫描</strong></h5><p> 对于小型表，表扫描通常是合适的，并且对性能的影响可以忽略不计。对于大型表，使用以下操作可以帮助优化器对于是否进行全表扫描做出正确的判断：  </p>
<ul>
<li><p>使用ANALYZE TABLE tbl_name语句来更新被扫描表中索引的分布。 </p>
</li>
<li><p>使用<code>FORCE INDEX</code>  语句来强制优化器对该表放弃全表扫描而使用索引，如下： </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM t1, t2 FORCE INDEX (index_for_column)</span><br><span class="line">WHERE t1.col_name=t2.col_name;</span><br></pre></td></tr></table></figure>

<p>force index()指令可以指定本次查询使用哪个索引。</p>
<p>mysql优化器会计算出一个合适的索引，但是这个索引不一定是最好的。force index()指令可以避免MySql优化器用到了一个低效的索引。</p>
<ul>
<li>设置启动参数–max-seeks-for-key=1000或使用参数SET max_seeks_for_key=1000来通知优化器如果没有索引扫描会导致过千的索引查找。 </li>
</ul>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p> 执行联接时从其他表中检索行。如果声明相同的类型和大小，MySQL可以更有效地在列上使用索引。在这种情况下， <a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>VARCHAR</code></a>与 <a href="https://dev.mysql.com/doc/refman/5.7/en/char.html" target="_blank" rel="noopener"><code>CHAR</code></a>被认为是相同的，如果它们被声明为相同的大小。例如， <code>VARCHAR(10)</code>和 <code>CHAR(10)</code>是相同的大小，但是 <code>VARCHAR(10)</code>和 <code>CHAR(15)</code>不是。 </p>
<ul>
<li>如果<code>ORDER BY</code>and <code>GROUP BY</code>子句中的所有列 都来自同一表，则在连接时优先使用该表。</li>
<li>如果存在一个<code>ORDER BY</code>子句和另一个<code>GROUP BY</code>子句，或者如果 <code>ORDER BY</code>或<code>GROUP BY</code> 包含连接队列中第一个表以外的表中的列，则会创建一个临时表。</li>
</ul>
<h3 id="压缩如何用于InnoDB表"><a href="#压缩如何用于InnoDB表" class="headerlink" title="压缩如何用于InnoDB表"></a><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-compression-internals.html" target="_blank" rel="noopener">压缩如何用于InnoDB表</a></h3><p>MySQL在著名的zlib库的帮助下实现了压缩，该 库实现了LZ77压缩算法。这种压缩算法在CPU利用率和数据大小减小方面都是成熟，可靠且有效的。该算法是 “ 无损的 ”，因此始终可以从压缩形式中重建原始的未压缩数据。LZ77压缩通过查找在要压缩的数据内重复的数据序列来工作。数据中的值模式决定了压缩的程度，但是典型的用户数据通常压缩50％或更多。</p>
<p>由于B树页面经常更新，因此需要特殊对待。重要的是，最小化B树节点的分割次数，以及最小化解压缩和重新压缩其内容的需求。</p>
<p>MySQL使用的一种技术是以未压缩的形式维护B树节点中的一些系统信息，从而促进某些就地更新。例如，这允许对行进行删除标记和删除，而无需任何压缩操作。</p>
<p>另外，MySQL试图避免在更改索引页时不必要的解压缩和重新压缩。在每个B树页面中，系统保留一个未压缩的 ‘ modification log ‘以记录对该页面所做的更改。小记录的更新和插入可以写入此修改日志，而无需完全重建整个页面。</p>
<p>当修改日志的空间用完时，InnoDB解压缩页面，应用更改并重新压缩页面。如果再压缩失败（称为一个的情况 压缩破坏），B-树节点被分割，并重复该过程，直到更新或插入成功。</p>
<h1 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h1><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQL索引背后的数据结构及算法原理</a></p>
<h2 id="涉及到的数据库表结构为："><a href="#涉及到的数据库表结构为：" class="headerlink" title="涉及到的数据库表结构为："></a>涉及到的数据库表结构为：</h2><pre><code>mysql&gt; show index from bigtables;
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table     | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| bigtables |          0 | PRIMARY  |            1 | id          | A         |        1010 |     NULL | NULL   |      | BTREE      |         |               |
| bigtables |          1 | idx      |            1 | number      | A         |          10 |     NULL | NULL   | YES  | BTREE      |         |               |
| bigtables |          1 | idx      |            2 | age         | A         |          17 |     NULL | NULL   | YES  | BTREE      |         |               |
| bigtables |          1 | idx      |            3 | adds        | A         |          17 |     NULL | NULL   | YES  | BTREE      |         |               |
+-----------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
4 rows in set (0.00 sec)

mysql&gt; show index from abc;
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| abc   |          0 | PRIMARY  |            1 | a           | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |
| abc   |          1 | idx_a    |            1 | a           | A         |           3 |     NULL | NULL   |      | BTREE      |         |               |
| abc   |          1 | idx_b    |            1 | b           | A         |           3 |     NULL | NULL   | YES  | BTREE      |         |               |
| abc   |          1 | idx_c    |            1 | c           | A         |           2 |     NULL | NULL   | YES  | BTREE      |         |               |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
4 rows in set (0.00 sec)</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2020 zhangyong
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>